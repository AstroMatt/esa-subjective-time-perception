<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Subjective Time Perception Experiment</title>
    <link href="_common.css?ts=2017-08-16T08:24" rel="stylesheet" type="text/css" />
    <script src="js/common.js?ts=2017-08-16T08:24"></script>
    <script src="js/time-perception.js?ts=2017-08-16T08:24"></script>
    <script src="js/jquery-3.1.1.min.js"></script>

    <style>
        table { display: inline-block; }
    </style>

    <script>
        Trial.config('end_datetime', new Date().toJSON());
        log('end', 'trial');

        var clicks = Trial.get().clicks;
        var blue = clicks.filter(click => click.color=='blue').length
        var red = clicks.filter(click => click.color=='red').length
        var white = clicks.filter(click => click.color=='white').length

        if ([blue, red, white].every(count => count > 5)) {
            Database.setItem('.veteran', true);
            //Trial.save();
            // Database.syncdb();
            var results = Trial.getResults();
            // Trial.clear();
        } else {
           alert('Not enough clicks, for the experiment to be valid! Please re-run the experiment.');
           goto('index');
        }
    </script>
</head>

<body>
    <h1>Thank you for participating in the experiment!</h1>

    <table id="results">
        <thead>
            <tr class="header">
                <th>Parameter</th>
                <th class="total">Total</th>
                <th class="red">Red</th>
                <th class="white">White</th>
                <th class="blue">Blue</th>
            </tr>
        </thead>

        <tbody>
            <tr class="count">
                <th>Count</th>
                <td class="total"><script>document.write(clicks.length);</script></td>
                <td class="red"><script>document.write(red);</script></td>
                <td class="white"><script>document.write(white);</script></td>
                <td class="blue"><script>document.write(blue);</script></td>
            </tr>

            <tr class="tempo">
                <th>Tempo</th>
                <th class="total"></th>
                <th class="red"></th>
                <th class="white"></th>
                <th class="blue"></th>
            </tr>

            <tr class="regularity">
                <th>Regularity</th>
                <th class="total"></th>
                <th class="red"></th>
                <th class="white"></th>
                <th class="blue"></th>
            </tr>

            <tr class="interval">
                <th>Interval</th>
                <th class="total"></th>
                <th class="red"></th>
                <th class="white"></th>
                <th class="blue"></th>
            </tr>
        </tbody>
    </table>



    <p><button onclick="goto('index')">Start experiment once again</button>
</body>
</html>
